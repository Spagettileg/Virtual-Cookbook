{% extends 'base.html' %} {% block content %}

{% with messages = get_flashed_messages() %} {% if messages %} {% for message in messages %}
<!-- Confirmation message to user that their recipe has been updated -->
<div class="row" id="alert_box">
    <div class="col-sm-12 col-md-12 d-flex align-items-center justify-content-center">
        <div class="recipe-edit-alert">
            <div class="row">
                <div class="col-sm-12 col-md-12">
                    <a href=" {{ url_for('index') }}"><i class="cross fas fa-times float-right" id="alert_close" aria-hidden="true"></i></a>
                </div>
                <div class="col-sm-12 col-md-12">
                    <div class="card-content-alert white-text">
                        <p class="alert text-center">{{ message }}
                        <br><sup>click on X to return to homepage</sup></p>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
{% endfor %} {% endif %} {% endwith %}

<!-- Page Layout -->
<main class="recipe-container">
    <div class="row">
        <div class="col-md-5 recipe-image-container d-flex align-items-center justify-content-center">
            <img class="img-fluid" src="{{ task.recipe_image }}">
        </div>

        <div class="col-md-7">
            <h3>{{ task.recipe_name }}</h3>
            <div class="row">
                <p class="recipe-description">{{ task.brief_description }}</p>
            </div>
        </div>

        <hr class="divider-recipe-detail"></hr>
        <div class="container">
            <div class="row recipe-icons">
                <div class="col-6 col-sm-6 col-md-2 food-icons">
                    <div><i class="divider-custom-icon-recipe fas fa-user"></i></div>
                    <p class="clear text-center">{{ task.author_name }}</p>
                </div>
                <div class="col-6 col-sm-6 col-md-2 food-icons">
                    <div><i class="divider-custom-icon-recipe fas fa-graduation-cap"></i></div>
                    <p class="clear text-center">{{ task.complexity }}</p>
                </div>
                <div class="col-6 col-sm-6 col-md-2 food-icons">
                    <div><i class="divider-custom-icon-recipe far fa-clock"></i></div>
                    <p class="clear text-center">{{ task.prep_time_mins }} prep (mins)</p>
                </div>
                <div class="col-6 col-sm-6 col-md-2 food-icons">
                    <div><i class="divider-custom-icon-recipe far fa-clock"></i></div>
                    <p class="clear text-center">{{ task.cook_time_mins }} cook (mins)</p>
                </div>
                <div class="col-6 col-sm-6 col-md-2 food-icons">
                    <div><i class="divider-custom-icon-recipe fas fa-weight"></i></div>
                    <p class="clear text-center">{{ task.calories }} calories</p>
                </div>
                <div class="col-6 col-sm-6 col-md-2 food-icons">
                    <div><i class="divider-custom-icon-recipe fas fa-users"></i></div>
                    <p class="clear text-center">{{ task.servings }} servings</p>
                </div>
            </div>
        </div>
        <hr class="divider-recipe-detail"></hr>
        <div class="container col-xs-12">
            <h4 class="left-align ingredients-section">Ingredients</h4>
            <p class="section recipe-ingredients" style="white-space: pre-wrap;">{{ task.ingredients }}</p>
        </div>
        <hr class="divider-recipe-detail"></hr>
        <div class="container col-xs-12">
            <h4 class="left-align instructions-section">Instructions</h4>
            <p class="section recipe-instructions" style="white-space: pre-wrap;">{{ task.instructions }}</p>
        </div>
        <hr class="divider-recipe-detail"></hr>
        <div class="container">
                {% if 'logged_in' in session %} {% if session['username'].title() == task.username.title() %}
                <span class="restrict-btn center-align"><a href="{{ url_for('edit_task', task_id=task._id) }}" class="btn-medium btn-edit-recipe">Edit Recipe</a></span>
                <span class="restrict-btn"><a href="{{ url_for('delete_task', task_id=task._id) }}" class="btn-medium btn-delete-recipe">Delete Recipe</a></span>                
                {% else %}
                <div></div>
                {% endif %} {% endif %}
            </div>
        <div class="spacer"></div>


    </div>
</main>
{% endblock %}
